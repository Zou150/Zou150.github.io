function g(t){return"."==t.substring(0,1)?document.getElementsByClassName(t.substring(1)):document.getElementById(t.substring(1))}function random(t){var e=Math.min(t[0],t[1]),a=Math.max(t[0],t[1])-e;return Math.round(Math.random()*a)+e}function addPhotos(){for(var t="",e="",a=0;a<data.length;a++)t+='<div class="photo  photo_front" onclick="turn(this)" id="photo_'+(a+1)+'"><div class="photo-wrap"><div class="side side-front"><p class="image"><img src="../images/'+data[a].img+'"></p><p class="caption">'+data[a].caption+'</p>vgcv</div><div class="side side-back"><p class="desc">'+data[a].desc+"</p></div></div></div></div>",e+='<span id="nav_'+(a+1)+'" onclick="turn(g(\'#photo_'+(a+1)+'\'))" class="i"></span>';var s='<div class="nav">'+e+"</div>";g("#wrap").innerHTML=t+s,rsort(random([1,data.length]))}function range(){var t={left:{x:[],y:[]},right:{x:[],y:[]}},e=g("#wrap").clientWidth,a=g("#wrap").clientHeight,s=g(".photo")[0].clientWidth,n=g(".photo")[0].clientHeight;return t.left.x=[0-s/4+130,e/2-5*s/4+130],t.left.y=[0-n/4+160,a-3*n/4+160],t.right.x=[e/2+s/4+130,e-s/4+130],t.right.y=t.left.y,t}function rsort(t){for(var e=g(".photo"),a=[],s=0;s<e.length;s++)e[s].className="photo photo_front",e[s].style.left="",e[s].style.top="",e[s].style.transform=e[s].style["-webkit-transform"]="scale(1.3)",a.push(e[s]);var n=g("#photo_"+t);n.className+=" photo_center",n=a.splice(t-1,1);for(var o=a.splice(0,Math.ceil(a.length/2)),r=a,l=range(),i=0;i<o.length;i++){(d=o[i]).style.left=random(l.left.x)+"px",d.style.top=random(l.left.y)+"px",d.style.transform=d.style["-webkit-transform"]="rotate("+random([-150,150])+"deg) scale(1)"}for(var c=0;c<r.length;c++){var d;(d=r[c]).style.left=random(l.right.x)+"px",d.style.top=random(l.right.y)+"px",d.style.transform=d.style["-webkit-transform"]="rotate("+random([-150,150])+"deg) scale(1)"}for(var m=g(".i"),p=0;p<m.length;p++)m[p].className="i";g("#nav_"+t).className+=" i_current"}function turn(t){var e=t.className,a=t.id.split("_")[1];if(!/photo_center/.test(e))return rsort(a);/photo_front/.test(e)?(e=e.replace(/photo_front/,"photo_back"),g("#nav_"+a).className+=" i_back"):(e=e.replace(/photo_back/,"photo_front"),g("#nav_"+a).className=g("#nav_"+a).className.replace(/\s*i_back\s*/," ")),t.className=e}var ie;function KeyPress(){var t;t=ie?event.keyCode:KeyPress.arguments[0].keyCode;var e=document.getElementsByClassName("i_current")[0],a=e.nextElementSibling,s=e.previousElementSibling;switch(t){case 39:null==a?document.getElementById("nav_1").click():a.click();break;case 37:null==s?document.getElementById("nav_20").click():s.click();break;case 38:case 40:e.click()}}addPhotos(),ie=!!document.all,document.onkeydown=KeyPress;